<!--
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html

  SPDX-License-Identifier: EPL-2.0

  Copyright Contributors to the Zowe Project.
-->

<div *ngIf="step != null" class="workflow-step-container">
  <div class="step-container-title">
    <!-- <div class="step-title">{{step.title}}</div> -->
    <div class="step-title" zluxFlyover [flyover]="workflowFlyover" position="bottom">{{step.title}}</div>
    <div class="view-selector-title">
      <ng-container [ngSwitch]="selectedView">
        <ng-container *ngSwitchCase="'properties'"i18n="view|Title of Properties view@@properties-view">Properties</ng-container>
        <ng-container *ngSwitchCase="'perform'"i18n="view|Title of Perform view@@perform-view">Perform</ng-container>
        <ng-container *ngSwitchCase="'notes'"i18n="view|Title of Notes view@@notes-view">Notes</ng-container>
        <ng-container *ngSwitchCase="'status'"i18n="view|Title of Status view@@status-view">Status</ng-container>
      </ng-container>
    </div>
    <div class="dots-menu" (click)="menu.show()">
      <workflow-popup-menu #menu position='left'>
        <workflow-popup-menu-item (onClick)="selectView('properties')">
          <div item-icon class="icon icon-properties"></div>
          <div item-title i18n="view|Title of Properties view@@properties-view">Properties</div>
        </workflow-popup-menu-item>
        <workflow-popup-menu-item (onClick)="selectView('perform')">
          <div item-icon class="icon icon-perform"></div>
          <div item-title i18n="view|Title of Perform view@@perform-view">Perform</div>
        </workflow-popup-menu-item>
        <workflow-popup-menu-item (onClick)="selectView('status')" *ngIf="step.isJclStep()">
          <div item-icon class="icon icon-status"></div>
          <div item-title i18n="view|Title of Status view@@status-view">Status</div>
        </workflow-popup-menu-item>
        <workflow-popup-menu-item (onClick)="selectView('notes')" *ngIf="false"><!-- hidden until notes view is implemented -->
          <div item-icon class="icon icon-notes"></div>
          <div item-title i18n="view|Title of Notes view@@notes-view">Notes</div>
        </workflow-popup-menu-item>
      </workflow-popup-menu>
    </div>
  </div>
  <div class="step-container-spacer"></div>
  <zlux-flyover #workflowFlyover>
      <div class="flyover">
        <div class="flyover-step-title">
          <div class="flyover-text">{{step.title}}</div>
        </div>
        <div class="flyover-step-info">
          <div class="flyover-text-small" i18n="flyover text|Workflow for the current step@@corresponding-workflow">Corresponding Workflow</div>
          <div class="flyover-text">{{step.workflow.workflowName}}</div>
          <div class="flyover-text-small" i18n="flyover text|Description of the workflow step@@workflow-step-description">Step Description</div>
          <div class="flyover-text">{{step.description}}</div>
        </div>
      </div>
    </zlux-flyover>
</div>
<div *ngIf="step != null" class="step-container-body">
  <workflow-step-general
      [hidden] = "selectedView !== 'properties'"
      [step]="step">
  </workflow-step-general>
  <workflow-step-status
      [hidden] = "selectedView !== 'status'"
      [step]="step">
  </workflow-step-status>
  <workflow-step-wizard
      [hidden] = "selectedView !== 'perform'"
      #workflowstepwizard
      [step]="step"
      (stepChangeRequested)="onStepChangeRequested($event)">
  </workflow-step-wizard>
</div>
<workflow-step-assignment #workflowstepassignment [step]="step"></workflow-step-assignment>

<!--
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html

  SPDX-License-Identifier: EPL-2.0

  Copyright Contributors to the Zowe Project.
-->
